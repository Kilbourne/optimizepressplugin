!function(){var a=function(a){for(var b="",c=0;c<a.length;c++)b+='<div class="opl-box" data-uid="'+a[c].uid+'"><div class="opl-box-image"><img class="'+a[c].type+'" src="'+OptimizePress.OP_LEADS_URL+"build/themes/"+a[c].theme.thumb_path+'" alt="OptimizeLeads '+a[c].theme.slug+' box" /></div><div class="opl-box-name"><p>'+a[c].title+"</p></div></div>";return b},b=function(){opjq(".opl-boxes").on("click",".opl-box",function(){for(var a=opjq(".opl-box.selected"),b=0;b<a.length;b++)a.removeClass("selected");opjq(this).addClass("selected")})},c=function(){var c=parseInt(.55*opjq(window).width()),d=parseInt(.6*opjq(window).height());/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(c=parseInt(.9*opjq(window).width()),d=parseInt(.6*opjq(window).height())),tinymce.PluginManager.add("custom_mce_button",function(e,f){e.addButton("custom_mce_button",{text:"OptimizeLeads",icon:"optimizeleads-wysiwyg-button",onclick:function(){e.windowManager.open({title:"Insert OptimizeLeads Box",classes:"opl-boxes-container",width:c,height:d,body:[{type:"container",classes:"opl-boxes-container-body",name:"opl-boxes-container",html:'<div class="opl-boxes"><img class="opl-boxes-spinner" src="'+OptimizePress.OP_URL+'lib/images/ajax-loader.gif" /></div>'}],onsubmit:function(a){var b=opjq(".opl-box.selected").data("uid");"undefined"!=typeof b&&e.insertContent('[op-opleads uid="'+b+'"]')}}),opjq.ajax({type:"POST",url:OptimizePress.ajaxurl,data:{action:OptimizePress.SN+"-get-optimizeleads-boxes"},dataType:"json",async:!0,success:function(b){if(401===b.code||"undefined"!=typeof b.error)return e.windowManager.alert("Please, check your OptimizeLeads Api Key and provide a valid one."),void e.windowManager.close();var c=a(b.boxes);opjq(".opl-boxes-spinner").hide(),opjq(".opl-boxes").append(c).hide().fadeIn("slow")}}),b()}})})};c()}();